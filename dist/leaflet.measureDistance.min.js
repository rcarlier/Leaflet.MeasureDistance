L.Control.MeasureDistance=L.Control.extend({options:{p1:[48.90675,2.24645],p2:{lat:48.9072,lng:2.2403},img1:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABfklEQVR4nO3Qy3UaQRRF0d3OhrEdAlkQjCAYsiAEe0w6nshaksWnP1V1aag76x7UemcPCm+7O//E79Lvvu/X6bj5U/LBHyUfW+M6QPqA9DpA+oD0OkD6gPQ6QPqA9DpA+oD0OkD6gPQ6QPqA9DpA+oD0OkD6gPQ6QPqA9DpA+oD0OkD6gPQ6QPqA9DpA+oD0OkD6gPSG7e68x1v6kNAOA7wowuF03OyHf18vhnA4HTd7GD7/fRGEj3j+A+DpEb7EcwGAp0X4Fs8VAJ4O4WI8NwB4GoSr8dwBYPUIN+MZAcBqEe7GMxKA1SGMimcCAKtBGB3PRAAeHmFSPDMAeFiEyfHMBODhEGbFswCAh0GYHc9CAOIIi+IpAEAMYXE8hQBojlAknoIANEMoFk9hAKojFI2nAgDVEIrHUwmA4ghV4qkIQDGEavFUBmAxQtV4GgAwG6F6PI0AmIzQJJ6GAIxGaBZPYwDuIjSNJwDAVYTm8YQA+IYQiY9vuzvv3yFi+wt3waJBMz65LQAAAABJRU5ErkJggg==",img2:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABRElEQVR4nO2ZsY0DMQwEiS/jo+vhGrlulLIuVePIKUvwR2sYsP227yivJHIApcLOAIok4s8qIpdGZ/Ue++N94WhkAPYANhmAPYBNBmAPYJMB2APYZAD2ADYZgD2ATQZgD2CTAdgD2GQA9gA2GYA9gE0GYA9gkwHYA9i4B9i27df7zm/c7YKZLbXWszT6Gqu1ns1s+aLSLvJvcCQyAHtAD6i0e7O9H40c4SofMcKdfKQIT+UjRHgpP3OEt+VnjPCx/EwRdsvPEOGw/MgR3ORHjOAuD7QDOZo8ULIgVR5oY5Gu5YEeHDy0PNAXw6aWByqB5YFKYHmgElgeqASWBypR5c1sMbNTKcVdvpRyMbNT9z9DLSIMIw88IwwnDzwiDCsPjkQYXh7siTCNPPgkwnTy4J0I08qD/yJMLw8eRQgjD24jsOX/ACzrCBpmohyQAAAAAElFTkSuQmCC",circle:!1},onAdd:function(i){return this._map=i,this._container=L.DomUtil.create("div","leaflet-control-measure"),this._createMarkers(),this._container},_createMarkers:function(){var i=L.icon({iconUrl:this.options.img1,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]}),A=L.icon({iconUrl:this.options.img2,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});this._m1=L.marker(this.options.p1,{draggable:!0,icon:i}).addTo(this._map),this._m2=L.marker(this.options.p2,{draggable:!0,icon:A}).addTo(this._map),this._m1.on("drag",this._update,this),this._m2.on("drag",this._update,this),this._m1.on("dragend",this._zoom,this),this._m2.on("dragend",this._zoom,this),this._update()},_update:function(){var i=this._m1.getLatLng(),A=this._m2.getLatLng();this._line&&this._map.removeLayer(this._line),this._line=L.polyline([i,A],{color:"red"}).addTo(this._map),this._m3?this._map.removeLayer(this._m3):this._zoom()},_zoom:function(){var i=this._m1.getLatLng(),A=this._m2.getLatLng(),t=i.distanceTo(A)/1e3,o=L.latLng((i.lat+A.lat)/2,(i.lng+A.lng)/2);this._m3&&this._map.removeLayer(this._m3),this._m3=L.circle(o,{radius:1,color:"red"}).addTo(this._map).bindPopup(`
                <img src="${this.options.img1}" width=16 />
                ${i.lat.toFixed(5)}, ${i.lng.toFixed(5)}<br>
                <img src="${this.options.img2}" width=16 />
                ${A.lat.toFixed(5)}, ${A.lng.toFixed(5)}<br>
                <hr>
                Middle: ${o.lat.toFixed(5)}, ${o.lng.toFixed(5)}<br>
                <hr>
                Distance: ${t.toFixed(2)} km<br>
                `),this._m3.openPopup(),this.options.circle?(this._circle&&this._map.removeLayer(this._circle),this._circle=L.circle(i,{radius:1e3*t}).addTo(this._map),this._map.fitBounds(this._circle.getBounds())):(A=L.latLngBounds(this._m1.getLatLng(),this._m2.getLatLng()),this._map.fitBounds(A))}}),L.control.measureDistance=function(i){return new L.Control.MeasureDistance(i)};